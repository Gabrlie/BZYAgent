# 安全策略与数据保护

## 已实现的安全控制
- JWT 鉴权：后端中间件拦截除白名单外的所有请求。
- 密码哈希：使用 bcrypt 生成与校验密码哈希。
- CORS 控制：通过环境变量配置允许的前端来源。
- 文件上传限制：限制扩展名与单文件大小。
- Base URL 校验：避免错误协议与非 `/v1` 结尾的地址。

## 数据保护现状
- AI API Key 以明文形式存储在数据库字段 `ai_api_key`。
- 生成文档与上传文件存储在本地文件系统。

## 风险与改进建议
- 建议对 `ai_api_key` 做加密存储或使用密钥管理服务。
- 建议增加上传文件内容扫描与更严格的文件名校验。
- 建议对导出与下载接口增加访问审计日志。
- 建议引入角色权限控制，限制课程与文档的访问范围。

## 安全运维建议
- 生产环境必须更换 `SECRET_KEY` 并保持长度与随机性。
- 建议设置数据库备份与文件备份策略。
- SSE 接口建议限制并发连接数与超时时间。
